<!-- image -->

# Repairing BPEL processes and activities using Business Process
Choreographer Explorer

## About this task

Business Process Choreographer Explorer provides various
views for the process administrator to monitor the processes that
are currently running.

The failure behavior of your process
is controlled by the Continue On Error setting
of the process template. If Continue On Error is
set to no, any unexpected failure causes the affected
activity to go to the stopped state.

If Continue
On Error is set to yes (or if it is not
set because your process was created with a WebSphereÂ® Integration
Developer version earlier than 6.1.2) and an unexpected failure occurs,
the default fault handler is invoked and ultimately causes the process
to end in a failed state. The latter happens because with an unexpected
failure there is no appropriate fault handler in the directly surrounding
scope. When there is no explicit fault handler defined for the current
fault and the default fault handler is invoked, it terminates the
current scope and propagates the fault to the surrounding scope. Ultimately,
this will cause the process to end in the failed state.

For
invoke, Java snippet, human task, and custom activities you can model
a dedicated Continue On Error setting and override
the process setting. However, if you leave the default value the same
as for the process, you can repair failure situations for these activity
types. The setting at the activity level controls only the behavior
of faults that are generated by the implementation of the activity.
Faults that occur during the evaluation of the join condition, or
during the evaluation of the transition condition of outgoing links
are still controlled by the setting at the process level. Therefore,
for example, an invoke activity can go to the stopped state (if, for
example, the evaluation of its join condition failed) even if the Continue
On Error setting at the activity level is set to yes.

If your activity stops, the process remains in the running
state. You then have several options in Business Process Choreographer
Explorer to repair the process and continue navigation.

## Procedure

- To view process instances with activities in the stopped
state, define your own process instance search. Or, click Stopped
Activities under Activity Instances in
the navigation pane, and then click the relevant process instance
of the failed activity.
- To view process instances with activities in the stopped
state, click Critical Processes under Process
Instances in the navigation pane.
- To monitor the progress of a specific process
instance, click View Process State in any view
that displays a list of process instances.

## What to do next

You can now take action to repair the pending activities.

- Analyzing the cause of a failed BPEL process

Check information about an exception which caused a BPEL process to fail. If the process is in the failed state, you cannot repair the instance itself but you might be able to fix the cause of the problem to prevent the failure of future instances.
- Modifying the variables of a stopped activity

Check the variables of an activity, and repair the process variables if they caused the activity to stop.
- Restarting activities

You can restart an activity using new input data, for example, if you repaired the variables of an activity.
- Forcing the completion of activities

If you are aware that an activity is not going to complete in a timely manner, for example, because the invoked service is no longer available, you can force the completion of the activity so that the process flow can continue. You might also want to force the completion of an activity if you cannot repair the cause of the failure. For example, if the evaluation of a wait expression in a wait activity repeatedly causes the activity to stop, you might want to force the activity to complete.
- Rescheduling activities

You can reschedule activities using new date and time data in Business Process Choreographer Explorer.
- Repairing stopped activities

You can use Business Process Choreographer Explorer to manually intervene in the navigation of a BPEL process. You can repair activities that stopped because problems occurred, for example, during an expression evaluation.
- Repairing stopped activities using the process state view

Using the process state view in Business Process Choreographer Explorer, you can manually repair activities that stopped.
- Recovery from infrastructure failures

A long-running BPEL process spans multiple transactions. If a transaction fails because of an infrastructure failure, Business Flow Manager provides a facility for automatically recovering from these failures.
- Repairing correlation sets

You can view and modify the correlation sets for an activity using Business Process Choreographer Explorer. Additionally, you can repair activity correlation sets that are incorrect due to runtime faults or repair actions, or due to jump operations in the BPEL process.
- Jumping activities

You can jump from one activity to another activity in the BPEL process instance. You can select to complete the source activity before you jump to a target activity.
- Skipping activities in BPEL processes

You can skip an activity so that it is not included in the processing of the BPEL process instance.
- Administering compensation for microflows using Business Process Choreographer Explorer

When a microflow runs, it can encounter problems. For these situations, compensation might have been defined for the BPEL process in the process model. Compensation allows you to undo previous completed steps, for example, to reset data and states so that you can recover from these problems. Undo actions are only necessary for activities that perform actions which do not participate in the transaction of the microflow.

<!-- image -->