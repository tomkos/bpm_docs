# Configuring the Process Portal index

The index allows process participants in Process Portal to
search for tasks or process instances that contain particular metadata
or instance data. The index is also used for historic data in the
Process Performance and Task Performance dashboards.

- Setting the location of
the task index
- Changing the index behavior

## Setting the index location

The
location of the index is determined by the value of the BPM\_SEARCH\_TASK\_INDEX WebSphere
variable. This variable has server scope on a stand-alone server and
has cluster scope on a cluster.

So
that an index does not have to be maintained for each cluster member,
one index can be shared across nodes. The index can be maintained
in only one cluster member at a time, which is enforced by a locking
strategy on the index. To set up the index, use a shared network storage
solution for your index and change the value of the cell scoped BPM\_SEARCH\_TASK\_INDEX\_ROOT variable
to point to the common location.

If you want a cluster member
to have a separate index, you can change the value of the cell scoped BPM\_SEARCH\_TASK\_INDEX\_ROOT variable
to point to a different location.

To locate the environments
variables, in the administrative console click Environment > WebSphere Variables.

To change the index location,
in the administrative console click Environment > WebSphere Variables. If the BPM\_SEARCH\_TASK\_INDEX variable
does not exist, define it with cell scope then set the value to the
new location.

## Changing the index behavior

- Indexing is enabled.
- The index is updated every 5 seconds.
- Upon task completion, the index is updated for the task that was
just completed and open tasks. It is not updated for previously completed
tasks associated with the process.

1. Edit the 100Custom.xml file for the appropriate
server. Information about the location of the 100Custom.xml file
is found in the topic Location of 100Custom configuration files.
2. Add or edit the following code snippet as required:<search-index merge="replace">            
    <task-index-enabled>true</task-index-enabled>            
    <task-index-update-interval>5</task-index-update-interval>
    <task-index-update-completed-tasks>false</task-index-update-completed-tasks>
    <task-index-store-fields>false</task-index-store-fields>
    <task-index-work-manager>wm/default</task-index-work-manager>
    <task-index-include-system-tasks>true</task-index-include-system-tasks>
    <process-index-instance-completion-best-effort>false</process-index-instance-completion-best-effort>
</search-index>
3 In the <search-index> section, modify theappropriate task index tags for the configuration settings that youwant to change.Table 1. XML tags that can be used to change theindex configuration settings XML tag Configuration setting description <task-index-enabled> This Boolean value determines whether indexing is enabled. The default valueis true ; if no index exists, an index is created. To turn off indexing, changethe value to false ; if no index exists, the index is not created. Restriction: If indexing is turned off, the search field in the Process Portal user interface ishidden. In addition, the Process list, Process Performance, and Team Performance dashboards do notwork correctly. To benefit from a better performance and a richer set of searchcapabilities, it is highly recommended to enable the federated data repository BPD indexing bysetting <fdr-index-enabled> to true and disable theProcess Portal search indexby setting <task-index-enabled> to false .However, keep the following points in mind: <task-index-update-interval> This integer value specifies the time betweenindex updates in seconds. The specified interval determines when thestate of the instance variables is captured for tasks that completedsince the last index update. Only those tasks that are completed duringthe current interval are searchable with the latest instance data.Thedefault value for the update interval is 5 seconds. The minimum valueis one second. <task-index-update-completed-tasks> This Boolean value controls whether the indexis updated for previously completed tasks. The default value is false ,which means that only the task that was just completed and open tasksare updated in the index.If you change the value to true ,the following changes in behavior occur: <task-index-store-fields> This Boolean value controls whether the actualfield values are stored as separate fields. The default value is false ,which means that the actual field values are not stored as separatefields. You might want to change the value to true fordebugging purposes because it improves the readability for peopleand it allows queries by other search tools. <task-index-work-manager> This string contains the JNDI name of thework manager that is used by the indexing process to manage the searchindex. The default value is wm/default , whichis the default work manager for WebSphere® ApplicationServer . Toimprove the performance of the index creation, in the administrativeconsole you can create a dedicated work manager with a greater numberof available threads. You can then use this tag to switch to the newwork manager. <task-index-include-system-tasks> This Boolean value controls whether systemtasks are indexed. To enable system tasks to be displayed in Ganttcharts in Process Portal ,ensure that the value of this tag is set to true .If the value of this tag is to false , system tasksare not displayed in Gantt charts. <process-index-instance-completion-best-effort> This Boolean value controls whether completion dates are created wheninstances that are migrated from previous versions of IBM® BPM are indexed. The default setting isfalse . If you change the value to true , the lastcompletion date of the associated tasks is used for the instance completion date. If no associatedtasks exist, the last modified time stamp of the instance is used as the completion date.

| XML tag                                         | Configuration setting description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
|-------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <task-index-enabled>                            | This Boolean value determines whether indexing is enabled. The default value is true; if no index exists, an index is created. To turn off indexing, change the value to false; if no index exists, the index is not created. Restriction: If indexing is turned off, the search field in the Process Portal user interface is hidden. In addition, the Process list, Process Performance, and Team Performance dashboards do not work correctly.  To benefit from a better performance and a richer set of search capabilities, it is highly recommended to enable the federated data repository BPD indexing by setting <fdr-index-enabled> to true and disable the Process Portal search index by setting <task-index-enabled> to false.  However, keep the following points in mind: If you are still using Process Portal, disabling the Process Portal search index will remove the full text search input field and the Process Portal dashboards. Instead of using Process Portal, consider using Workplace along with the enabled federated data repository BPD indexing, and then disable the Process Portal search index without degrading the user experience. If you are still using the /rest/bpm/wle/v1/tasks REST API, disabling the Process Portal search index will remove the full text search support with this API. Instead of using the /rest/bpm/wle/v1/tasks REST API, switch to the advanced search API that is exposed on /rest/bpm/wle/v2, which offers a richer set of search capabilities, and then disable the Process Portal search index and enable the federated data repository BPD indexing to improve the overall performance and benefit from a richer search REST API. |
| <task-index-update-interval>                    | This integer value specifies the time between index updates in seconds. The specified interval determines when the state of the instance variables is captured for tasks that completed since the last index update. Only those tasks that are completed during the current interval are searchable with the latest instance data.The default value for the update interval is 5 seconds. The minimum value is one second.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| <task-index-update-completed-tasks>             | This Boolean value controls whether the index is updated for previously completed tasks. The default value is false, which means that only the task that was just completed and open tasks are updated in the index.If you change the value to true, the following changes in behavior occur: Instance-level updates, such as business data that is updated later in the process, is propagated to completed tasks.  Although the system has additional work to index completed tasks, searches on completed tasks are based on the final instance business data.  Users with many assigned tasks experience improved performance of queries on active process instances because the queries can filter out tasks from completed instances.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| <task-index-store-fields>                       | This Boolean value controls whether the actual field values are stored as separate fields. The default value is false, which means that the actual field values are not stored as separate fields. You might want to change the value to true for debugging purposes because it improves the readability for people and it allows queries by other search tools.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| <task-index-work-manager>                       | This string contains the JNDI name of the work manager that is used by the indexing process to manage the search index. The default value is wm/default, which is the default work manager for WebSphere® Application Server. To improve the performance of the index creation, in the administrative console you can create a dedicated work manager with a greater number of available threads. You can then use this tag to switch to the new work manager.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| <task-index-include-system-tasks>               | This Boolean value controls whether system tasks are indexed. To enable system tasks to be displayed in Gantt charts in Process Portal, ensure that the value of this tag is set to true. If the value of this tag is to false, system tasks are not displayed in Gantt charts.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| <process-index-instance-completion-best-effort> | This Boolean value controls whether completion dates are created when instances that are migrated from previous versions of IBM® BPM are indexed. The default setting is false. If you change the value to true, the last completion date of the associated tasks is used for the instance completion date. If no associated tasks exist, the last modified time stamp of the instance is used as the completion date.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |

4. Save your changes.
5. Restart the server to activate the changes.

## Related concepts

- Updating the Process Portal index

## Related reference

- Process Portal index: Default indexed fields