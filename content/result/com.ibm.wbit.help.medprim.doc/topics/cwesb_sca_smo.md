# Service message objects

## SMO model

- Header information associated with the message. For example, Java™ Message Service (JMS) headers
if a message has been conveyed using the JMS API, or MQ headers if
the messages has come from WebSphere® MQ.
- The body of the message: the message payload. The message payload
is the application data exchanged between service endpoints.
- Message attachments.
- Context information (data other than the message payload).

All of this information is accessed as SDO DataObjects,
and there is a schema declaration that specifies the overall structure
of the SMO. The schema is generated by IBM® Integration
Designer.

## SMO content

All SMOs have the same basic
structure. The structure consists of a root data object called a ServiceMessageObject,
which contains other data objects representing the header, body, attachments,
and context data. The precise structure of the headers, body, and
context depends on how you define the mediation flow at integration
development. The mediation flow is used at run time to mediate between
services.

- Web services message headers.
- Service Component Architecture (SCA) message headers.
- Java Message Service (JMS)
message headers.
- WebSphere MQ message
headers.
- WebSphere Adapters
message headers.

Typically, the structure of the SMO body, which holds
the application data, is determined by the Web Services Description
Language (WSDL) message that you specify when you configure a mediation
flow.

- Referenced attachments, which are defined in a WSDL port type
as parts within an input or output message and which have a binary
type, do not have their data stored in the SMO; instead, the path
to the message body element that holds the data is contained in the bodyPath element.
- Unreferenced attachments, which are not defined in a WSDL port
type, have their data placed in the data element
in the SMO, and have no bodyPath element.

SMO
context objects are either user-defined or system-defined. You can
use user-defined context objects to store a property that mediation
primitives can use later in the flow. You define the structure of
a user-defined context object in a business object, and use the business
object in the input node of the request flow. The correlation context,
transient context and shared context are user-defined context objects.

Figure 1. Overview of SMO structure. The context, headers,
body and attachments of a ServiceMessageObject

<!-- image -->

The SMO provides an interface to access and modify message
headers, message payloads, message attachments, and message context.

## How the runtime environment uses the SMO

The
runtime environment operates on messages that are in flight between
interaction endpoints. The runtime environment creates SMO objects,
which a mediation flow uses to process a message.

When you
create mediation flows, IBM Integration
Designer specifies the type
of message body for each terminal (input, output or fail) and, optionally,
the type of context information. The runtime environment uses this
information to convert messages into SMO objects of the specified
type.

To provide dynamic routing, the interaction endpoints
can be looked up using WebSphere Service
Registry and Repository (WSRR), or a database. The result of the WSRR
query, or database lookup, can be stored at a particular location
in the SMO, from where the runtime environment will take the dynamic
endpoint.

- SMO structure

The service message object (SMO) structure starts with a root data object called ServiceMessageObject, which contains other data objects representing header, body, attachments, and context data.
- SMO headers

The service message object (SMO) headers carry header information for different types of messages.
- SMO context

The service message object (SMO) context lets mediation primitives pass data that is not part of the message payload, between themselves.
- SMO body

The body of a service message object (SMO) is defined by reference to a Web Services Description Language (WSDL) message.
- SMO attachments

The service message object (SMO) contains an attachments element for each attachment associated with a SOAP message.
- XML representation of SMO

Some mediation primitives use an XML serialization of a Service Message Object (SMO).