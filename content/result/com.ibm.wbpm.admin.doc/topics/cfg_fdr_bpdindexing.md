# Enabling and configuring the federated data repository BPD indexing

Business Automation Workflow can
index data about business process definition (BPD) process instances and tasks in the federated data
repository.

To enable the federated data repository BPD indexing, meet the prerequisites and then complete
the following configuration on your Business Automation Workflow servers.

## Before you begin

Complete configuring the connection to the federated data repository, as described in Configuring the federated data repository connection.

## Configuring Business Automation Workflow to index into the federated data repository

After you configure Business Automation Workflow to communicate with the
federated data repository, you can enable and configure the federated data repository BPD indexing
by editing the 100Custom.xml configuration file.

### About this task

```
<properties>   
    <server>
      <search-index merge="mergeChildren">
            <fdr-index-enabled merge="replace">true</fdr-index-enabled>
      </search-index>
    </server>
</properties>
```

To tune the processing of the BPD indexing, you can define other optional properties. See the
properties that you can use to customize the federated data repository BPD indexing behavior in the
following table.

| Property                               | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | Default value                                                                                                                                                                    |
|----------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| fdr-index-enabled                      | A flag that indicates whether the federated data repository indexing is enabled. To benefit from a better performance and a richer set of search capabilities, it is highly recommended to enable the federated data repository BPD indexing by setting <fdr-index-enabled> to true and disable the Process Portal search index by setting <task-index-enabled> to false.  However, keep the following points in mind: If you are still using Process Portal, disabling the Process Portal search index will remove the full text search input field and the Process Portal dashboards. Instead of using Process Portal, consider using Workplace along with the enabled federated data repository BPD indexing, and then disable the Process Portal search index without degrading the user experience. If you are still using the /rest/bpm/wle/v1/tasks REST API, disabling the Process Portal search index will remove the full text search support with this API. Instead of using the /rest/bpm/wle/v1/tasks REST API, switch to the advanced search API that is exposed on /rest/bpm/wle/v2, which offers a richer set of search capabilities, and then disable the Process Portal search index and enable the federated data repository BPD indexing to improve the overall performance and benefit from a richer search REST API. | false                                                                                                                                                                            |
| fdr-index-name                         | Enables you to define the name of the federated data repository index that stores the documents about process instances and tasks. The index name is prefixed with “@”, and the index alias is named exactly as the <fdr-index-name> value. Important: To prevent the automatic creation of the index in Elasticsearch and OpenSearch, configure the federated data repository by using the action.auto\_create\_index property.  Do not define the fdr-index-name property if you want to federate the Business Automation Workflow system from Process Federation ServerProcess Federation Server that runs as part of Cloud Pak for Business Automation or as part of a stand-alone Business Automation Workflow deployment on containers.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | If this property is not defined, the index name is created using theBusiness Automation Workflow system unique identifier. For example, “@068e7d66-b043-490e-8ee8-9e92be6c4ce6”. |
| fdr-index-shards                       | The number of shards to use when you create the federated data repository index.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | 3                                                                                                                                                                                |
| fdr-index-replicas                     | The number of replica shards to define for the federated data repository index. This property is only used by Business Automation Workflow when it creates the federated data repository index. To change the number of replica shards on the existing federated data repository index, use the Elasticsearch or OpenSearch API directly.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | 2                                                                                                                                                                                |
| fdr-index-threads                      | The number of indexing threads per node.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | 1                                                                                                                                                                                |
| fdr-index-interval                     | The minimum interval between two starts of the indexing cycle, in milliseconds.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | 1000                                                                                                                                                                             |
| fdr-index-house-keeping-interval       | The interval between two housekeeping maintenance operations, in minutes. If this value is negative, the housekeeping maintenance operation is not triggered internally, and you must manually run the operation on a regular basis instead.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | 60                                                                                                                                                                               |
| fdr-index-house-keeping-audit-max-age  | The maximum age (in minutes) of indexing audit entries to keep (to not delete) on a housekeeping maintenance operation.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | 10080 (equals to 7 days)                                                                                                                                                         |
| fdr-index-house-keeping-record-max-age | The maximum number of maintenance operation records of each type to keep (to not delete) on a housekeeping maintenance operation.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | 50                                                                                                                                                                               |
| fdr-index-batch-size                   | The maximum size of indexing queue entries to process on a single indexing cycle.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | 1000                                                                                                                                                                             |
| fdr-index-deletion-batch-size          | The maximum number of rows to delete when a maintenance operation requires row deletions. For example, during a housekeeping maintenance operation.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | 50000                                                                                                                                                                            |
| fdr-index-reconciliation-batch-size    | The maximum number of discrepancies to identify on each cycle of the “reconcile” maintenance operation.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | 500                                                                                                                                                                              |
| fdr-index-failure-threshold            | Specifies how many times a failed operation such as the creation, update, or deletion of a document in the federated data repository index can be tried again. When the number of retries reaches the threshold, the operation request remains in the queue but is ignored by the indexer. To attempt processing the queue entry again, you must execute the "retry-failures" maintenance operation.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | 20                                                                                                                                                                               |