<!-- image -->

# XPath extension functions for aggregating the results of human
tasks with parallel ownership

## Aggregation functions for fields of type
string

| Function name          | Parameters    | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
|------------------------|---------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| concat                 | None          | This function concatenates the values of the output messages for all of the subtasks. Output messages are converted to strings according to the XPath string function. If no output messages exist, an empty string is returned.                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| concatWithDelimiter    | Delimiter     | This function concatenates the values of the output messages for all of the subtasks. Each of the values in the concatenated output is separated by the specified delimiter string. If no output messages exist, an empty string is returned.                                                                                                                                                                                                                                                                                                                                                                                                                             |
| leastFrequentOccurence | None          | This function returns the value that occurs least frequently. If no output messages exist or more than one message has the least frequently occurring value (a tie), an empty string is returned.                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| mostFrequentOccurence  | None          | This function returns the value that occurs most frequently. If no output messages exist or a tie occurs, an empty string is returned.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| voteOnString           | Percentage    | This function returns the value that occurs most frequently if its occurrence is greater than the specified percentage, and there is no tie. The result of the vote is determined in the following way. The percentage is multiplied by the total number of subtasks for the task with parallel ownership to determine the minimum number of occurrences.   The string values are filtered so that only those values which exceed the minimum number of occurrences determined in step 1 remain. From the values that qualify from step 2, the value that occurs most frequently is returned.   If no output messages exist or a tie occurs, an empty string is returned. |

## Aggregation functions for fields of type
boolean

| Function name   | Parameters   | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
|-----------------|--------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| and             | None         | This function returns the conjunction of all of the values.  The result is true if all of the values are true. If at least one of the values is false or no output messages exist, the result is false.                                                                                                                                                                                                                                                                                                                       |
| or              | None         | This function returns the disjunction of all of the values. The result is true if one of the values is true. If all of the values are false or no output messages exist, the result is false.                                                                                                                                                                                                                                                                                                                                 |
| vote            | Percentage   | This function returns the Boolean value that occurs most frequently if its occurrence is greater than the specified percentage, and there is no tie. The result of the vote is determined in the following way. The specified percentage and the count of the subtasks result in a minimum value that must be exceeded by the occurrence of a single Boolean value.  From the values that qualify from step 1, return the value that occurs most frequently.  If no output messages exist or a tie occurs, false is returned. |

## Aggregation functions for numeric, duration,
and dateTime values

| Function name   | Parameters   | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
|-----------------|--------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| avg             | None         | This function returns the average value of the numeric, duration, or dateTime values. The calculation mode and the return type are determined by the first message in the set that has a value. The type of the returned value is the same as the type of the nodes in the node set. If no output messages exist, null is returned and the output for this field is not set.                                                                                                                                                                                                                                          |
| max             | None         | This function returns the maximum value of the numeric, duration, or dateTime values. The comparison mode and the return type are determined by the first message in the set that has a value. If no output messages exist, null is returned and the output for this field is not set.                                                                                                                                                                                                                                                                                                                                |
| min             | None         | This function returns the minimum value of the numeric, duration, or dateTime values. The comparison mode and the return type are determined by the first message in the set that has a value. If no output messages exist, null is returned and the output for this field is not set.                                                                                                                                                                                                                                                                                                                                |
| sum             | None         | This function returns the sum of the numeric or duration values. The dateTime type is not supported. The calculation mode and the return type are determined by the first message in the set that has a value. For duration values, the duration time in milliseconds is used to calculate the sum. The algorithm converts all of the numeric values to doubles, and then it adds the resulting values. All of the calculations are done based on doubles. The return type is the same as the type of the output messages. If no output messages exist, 0 is returned for numeric values and P0S for duration values. |