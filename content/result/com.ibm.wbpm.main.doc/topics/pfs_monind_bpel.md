# MBeans for BPEL indexers

## MBean objectName

Every JMX MBean associated with a
BPEL indexer has an Object Name with a name. The syntax for the Object Name is
com.ibm.bpm.federation.server:type=Indexers,subtype=BpelIndexers,name=indexerUniqueID.

indexerUniqueID
is a string based on the ID of the BPEL indexers and of the federated system they refer to in the
Process Federation Server
server.xml, and has the following format:
federatedSystemID.indexerID.
federatedSystemID is the value of the id attribute of the ibmPfs\_federatedSystem element, and indexerID is the value of the id attribute of the ibmPfs\_bpelIndexer element.

If
no id attribute is specified for the BPEL indexer, then Liberty assigns a default
value with the format default-n, where n is a
positive integer that starts at 0. In that case, the indexerUniqueID string
corresponds to the federatedSystemID.default-n.

```
<ibmPfs\_federatedSystem  id="bpm1" .../>
<ibmPfs\_bpdIndexer federatedSystemRef="bpm1" .../>
```

```
<ibmPfs\_federatedSystem  id="bpel1" .../>
<ibmPfs\_bpelIndexer id=idx1 federatedSystemRef="bpel1" .../>
<ibmPfs\_bpelIndexer id=idx2 federatedSystemRef="bpel1" .../>
```

## MBean attributes

| Attribute name                           | Description                                                                                               | Nature     | Type              | Return value                                                                                                                                                                                                                                                                                                                                                                                   |
|------------------------------------------|-----------------------------------------------------------------------------------------------------------|------------|-------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| scheduledSyncTasks (1)                   | Indicates whether the Sync Tasks maintenance operation is run in scheduled mode.                          | Read/write | java.lang.Boolean | true or false                                                                                                                                                                                                                                                                                                                                                                                  |
| scheduledIndexLogTrim ( 1)               | Indicates whether the Index Log Trim maintenance operation is run in scheduled mode.                      | Read/write | java.lang.Boolean | true or false                                                                                                                                                                                                                                                                                                                                                                                  |
| status                                   | The indexer status.                                                                                       | Read only  | java.lang.String  | One of the following strings: UNINITIALIZED INITIALIZING INITIALIZED STARTING\_NEW\_CYCLE CREATING\_ELASTICSEARCH\_INDEX PERFORMING\_CHANGELOG\_COMPACTION PERFORMING\_INDEX\_LOG\_TRIM PERFORMING\_SYNC\_TASKS  PERFORMING\_SYNC\_TASKS\_DELETE CLAIMING\_CHANGE\_LOG\_ENTRIES RETRIEVING\_CHANGE\_LOG\_ENTRIES RETRIEVING\_TASK\_DATA INDEXING\_IN\_ELASTICSEARCH  LOGGING\_RESULT WAITING\_FOR\_NEXT\_CYCLE INTERRUPTED |
| currentDatabaseTime                      | The current database time in yyyy-MM-dd HH:MM:ss format.                                                  | Read only  | java.lang.String  | The date in yyyy-MM-dd HH:MM:ss format                                                                                                                                                                                                                                                                                                                                                         |
| nextScheduledChangeLogCompaction         | The next Change Log Compaction maintenance operation start time, returned in yyyy-MM-dd HH:MM:ss format.  | Read only  | java.lang.String  | The date in yyyy-MM-dd HH:MM:SS format  if the scheduled Change Log Compaction maintenance operation is not disabled. isUnscheduledOperation  if the operation was disabled, or if the date is not yet processed.                                                                                                                                                                              |
| nextScheduledSyncTasksTime               | The next Sync Tasks maintenance operation start time, returned in yyyy-MM-dd HH:MM:ss format.             | Read only  | java.lang.String  | The date in yyyy-MM-dd HH:MM:ss format  if the scheduled Sync Tasks maintenance operation is not disabled. isUnscheduledOperation  if the operation was disabled, or if the date is not yet processed.                                                                                                                                                                                         |
| nextScheduledSyncTaskDeletesTime         | The next Sync Task Deletes maintenance operation start time, returned in yyyy-MM-dd HH:MM:ss format.      | Read only  | java.lang.String  | The date in yyyy-MM-dd HH:MM:ss format  if the scheduled Sync Task Deletes maintenance operation is not disabled. isUnscheduledOperation  if the operation was disabled, or if the date is not yet processed.                                                                                                                                                                                  |
| nextScheduledIndexLogTrimTime            | The next Index Log Trim maintenance operation, returned in yyyy-MM-dd HH:MM:ss format.                    | Read only  | java.lang.String  | The date in yyyy-MM-dd HH:MM:ss format  if the scheduled Index Log Trim maintenance operation is not disabled. undefined  if the operation was disabled, or if the date is not yet processed.                                                                                                                                                                                                  |
| lastCyclesIndexerResults                 | The indexer results over the last 10 indexing cycles.                                                     | Read only  | java.util.List    | The indexer results over the last 10 indexer cycles  as a list of string in the format:durationMillis=duration,taskIndexed=count, startTime=startTime=yyyy-MM-dd HH:MM:ss,tasksFailed=count                                                                                                                                                                                                    |
| numberIndexerFailures                    | The number of indexer failures and retries during the last indexer cycle.                                 | Read only  | java.lang.String  | failures=count,numberRetries=count, timestamp= yyyy-MM-dd HH:MM:ss                                                                                                                                                                                                                                                                                                                             |
| lastKnownIndexerException                | The last known indexer exception that was raised in previous indexer cycles.                              | Read only  | java.lang.String  | exception=exceptionName,[cause=cause],  timestamp=yyyy-MM-dd HH:MM:ss: cause is optional if there is no cause  timestamp is the time when the exception occurred.   undefined if no exception has occurred since the indexer is running.                                                                                                                                                       |
| lastCycleIndexingRate                    | Gets the percentage of time spent indexing out of the idle time over the last indexer cycle.              | Read only  | java.lang.String  | The percentage as a floating-point number.                                                                                                                                                                                                                                                                                                                                                     |
| averageLastCyclesIndexingRate            | The average percentage of time spent indexing out of the idle time over last ten indexer cycles.          | Read only  | java.lang.String  | The average percentage as a floating-point number.                                                                                                                                                                                                                                                                                                                                             |
| columnName                               | The column name value that corresponds to this indexer in the PFS\_BPEL\_CHANGE\_LOG\_CONSUMER table.         | Read only  | java.lang.String  | The column name for the BPEL indexer                                                                                                                                                                                                                                                                                                                                                           |
| indexName                                | The index name used by this indexer                                                                       | Read only  | java.lang.String  | The index name                                                                                                                                                                                                                                                                                                                                                                                 |
| lastIndexedTasksRate                     | Number of indexed tasks per second in the previous indexer cycle                                          | Read only  | java.lang.String  | A floating-point number                                                                                                                                                                                                                                                                                                                                                                        |
| averageLastCyclesIndexedTasksRate        | The average of indexed tasks per second over the last 25 indexer cycles                                   | Read only  | java.lang.String  | The average percentage as a floating-point number.                                                                                                                                                                                                                                                                                                                                             |
| averageClaimedChangeLogEntriesDurations  | The average of durations in milliseconds for claiming change log entries over the last 25 indexer cycles  | Read only  | java.lang.String  | The average percentage as a floating-point number.                                                                                                                                                                                                                                                                                                                                             |
| averageFetchDataToIndexDurations         | The average of durations in milliseconds for fetching data to index over the last 25 indexer cycles       | Read only  | java.lang.String  | The average percentage as a floating-point number.                                                                                                                                                                                                                                                                                                                                             |
| averageConsumedChangeLogEntriesDurations | The average of durations in milliseconds for consuming change log entries over the last 25 indexer cycles | Read only  | java.lang.String  | The average percentage as a floating-point number.                                                                                                                                                                                                                                                                                                                                             |

## MBean operations

| Operation name             | Description                                                                                               | Nature   | Return Value                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
|----------------------------|-----------------------------------------------------------------------------------------------------------|----------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| runUnscheduledSyncTasks    | Runs the Sync Tasks operation immediately, unless the scheduled mode for this operation was not disabled. | None     | status=acknowledged,allDatabaseEntriesProcessed=boolean,other\_properties upon completion of the Sync Tasks operation execution.The Boolean value for the property allDatabaseEntriesProcessed is true if all the entries in the database were processed in a single batch, or false if there are remaining entries to be processed. In that latter case, the operation can be relaunched to process the remaining entries.  status=failed,reason=scheduledOperationEnabled if the scheduled maintenance operation is not disabled.     |
| runUnscheduledIndexLogTrim | Runs the Index Log Trim immediately, unless the scheduled mode for this operation was not disabled.       | None     | status=acknowledged,allDatabaseEntriesProcessed=boolean,other\_properties upon completion of the Index Log Trim operation execution.The Boolean value for the property allDatabaseEntriesProcessed is true if all the entries in the database were processed in a single batch, or false if there are remaining entries to be processed. In that latter case, the operation can be relaunched to process the remaining entries.  status=failed,reason=scheduledOperationEnabled if the scheduled maintenance operation is not disabled. |

The execution of a maintenance operation in unscheduled mode is always synchronous, as any other
operation performed on the MBean, which means that the operation only returns when it is
complete.